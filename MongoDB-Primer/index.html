<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title></title><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="css/presentation.css" media="screen,projection"></link></head><body class="impress-not-supported"><div id="impress"><div class="step" step="0" data-x="0" data-y="0"><h1 id="mongodb-primer">MongoDB Primer</h1><p>NYC Python</p><p>February 19, 2013</p></div><div class="step" step="1" data-x="1600" data-y="0"><h1 id="things-to-know">Things to know</h1><p>Collections, not tables</p><p>Documents, not rows</p></div><div class="step" step="2" data-x="3200" data-y="0"><h1 id="id1">Things to know</h1><h2 id="versions">Versions</h2><p>Odd = development, even = production</p><p>2.3 will turn into 2.4</p></div><div class="step" step="3" data-x="4800" data-y="0"><h1 id="id2">Things to know</h1><h2 id="bit-vs-64-bit">32-bit vs 64-bit?</h2><p>64-bit. Always.</p></div><div class="step" step="4" data-x="6400" data-y="0"><h1 id="what-is-mongodb">What is MongoDB?</h1><p>To really understand what MongoDB is, you need to know what it is not</p></div><div class="step" step="5" data-x="8000" data-y="0"><h1 id="what-is-it-not">What is it not?</h1><h2 id="relational">Relational</h2><p>No joins</p></div><div class="step" step="6" data-x="9600" data-y="0"><h1 id="id3">What is it not?</h1><h2 id="id4">Relational</h2><p>Joins at the application layer</p></div><div class="step" step="7" data-x="11200" data-y="0"><h1 id="id5">What is it not?</h1><h2 id="id6">Relational</h2><p>Embedded documents</p></div><div class="step" step="8" data-x="12800" data-y="0"><h1 id="id7">What is it not?</h1><h2 id="transactional">Transactional</h2><p>No transactions</p></div><div class="step" step="9" data-x="14400" data-y="0"><h1 id="id8">What is it not?</h1><h2 id="id9">Transactional</h2><p>Transactions at the application layer</p></div><div class="step" step="10" data-x="16000" data-y="0"><h1 id="so-what-is-it">So what is it?</h1><h2 id="dynamic">Dynamic</h2><p>Schema is stored at the document level</p></div><div class="step" step="11" data-x="17600" data-y="0"><h1 id="id10">So what is it?</h1><h2 id="scalable">Scalable</h2><p>Replica sets and arbiters</p><p>Sharding</p></div><div class="step" step="12" data-x="19200" data-y="0"><h1 id="id11">So what is it?</h1><h2 id="fast">Fast</h2><p>In memory</p></div><div class="step" step="13" data-x="20800" data-y="0"><h1 id="what-you-need-to-know-about-indexes">What you need to know about indexes</h1><h2 id="directional">Directional</h2><pre class="highlight code javascript"><span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span><span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span><span class="p">{</span><span class="nx">field</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})</span>

<span class="nx">db</span><span class="p">.</span><span class="nx">collection</span><span class="p">.</span><span class="nx">ensureIndex</span><span class="p">(</span><span class="p">{</span><span class="nx">field1</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">field2</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">})</span></pre></div><div class="step" step="14" data-x="22400" data-y="0"><p><tt>explain()</tt></p><pre class="highlight code javascript"><span class="p">{</span>
  <span class="s2">"cursor"</span> <span class="o">:</span> <span class="s2">"&lt;Cursor Type and Index&gt;"</span><span class="p">,</span>
  <span class="s2">"isMultiKey"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"n"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"nscannedObjects"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"nscanned"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"nscannedObjectsAllPlans"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"nscannedAllPlans"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"scanAndOrder"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"indexOnly"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"nYields"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"nChunkSkips"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"millis"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">"indexBounds"</span> <span class="o">:</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nx">index</span> <span class="nx">bounds</span><span class="o">&gt;</span> <span class="p">},</span>
  <span class="s2">"allPlans"</span> <span class="o">:</span> <span class="p">[</span>
                 <span class="p">{</span> <span class="s2">"cursor"</span> <span class="o">:</span> <span class="s2">"&lt;Cursor Type and Index&gt;"</span><span class="p">,</span>
                   <span class="s2">"n"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
                   <span class="s2">"nscannedObjects"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
                   <span class="s2">"nscanned"</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">num</span><span class="o">&gt;</span><span class="p">,</span>
                   <span class="s2">"indexBounds"</span> <span class="o">:</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nx">index</span> <span class="nx">bounds</span><span class="o">&gt;</span> <span class="p">}</span>
                 <span class="p">},</span>
                  <span class="p">...</span>
               <span class="p">],</span>
  <span class="s2">"oldPlan"</span> <span class="o">:</span> <span class="p">{</span>
                <span class="s2">"cursor"</span> <span class="o">:</span> <span class="s2">"&lt;Cursor Type and Index&gt;"</span><span class="p">,</span>
                <span class="s2">"indexBounds"</span> <span class="o">:</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nx">index</span> <span class="nx">bounds</span><span class="o">&gt;</span> <span class="p">}</span>
              <span class="p">}</span>
  <span class="s2">"server"</span> <span class="o">:</span> <span class="s2">"&lt;host:port&gt;"</span><span class="p">,</span>
<span class="p">}</span></pre></div><div class="step" step="15" data-x="24000" data-y="0"><p><a href="http://docs.mongodb.org/manual/reference/explain/#explain-output-fields-core">http://docs.mongodb.org/manual/reference/explain/#explain-output-fields-core</a></p></div><div class="step" step="16" data-x="25600" data-y="0"><h1 id="atomic-updates">Atomic updates</h1><ul><li><tt>$inc</tt></li><li><tt>$rename</tt></li><li><tt>$set</tt></li><li><tt>$unset</tt></li></ul></div><div class="step" step="17" data-x="27200" data-y="0"><h1 id="id12">Atomic updates</h1><ul><li><tt>$pop</tt></li><li><tt>$pull</tt></li><li><tt>$pullAll</tt></li><li><tt>$addToSet</tt> / <tt>$each</tt></li><li><tt>$push</tt></li><li><tt>$pushAll</tt></li></ul></div><div class="step" step="18" data-x="28800" data-y="0"><p><a href="http://docs.mongodb.org/manual/reference/operator/">http://docs.mongodb.org/manual/reference/operator/</a></p></div><div class="step" step="19" data-x="30400" data-y="0"><h1 id="uses-for-collections">Uses for collections</h1><p><em>To the whiteboard...</em></p></div></div><div id="hovercraft-help"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Left, Down, Page Down</th><td>Next slide</td></tr><tr><th>Right, Up, Page Up</th><td>Previous slide</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>